{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst API_KEY = '49342840-003e2c292237fbf09de0074d9';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPictures(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response?.data?.message || 'Failed to fetch images');\n  }\n}","export const createMarkup = images => {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"title\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`\n    )\n    .join('');\n};\n","import { getPictures } from './js/pixabay-api.js'; \nimport { createMarkup } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst container = document.querySelector('.container');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\nlet lightbox;\n\nfunction initializeLightbox() {\n  if (lightbox) {\n    lightbox.destroy();\n  }\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nfunction toggleLoadMoreBtn(show) {\n  loadMoreBtn.style.display = show ? 'block' : 'none';\n}\n\nfunction showEndMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'bottomCenter',\n    timeout: 5000,\n    close: true,\n    progressBar: true,\n  });\n}\n\nfunction removeEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  if (endMessage) {\n    endMessage.remove();\n  }\n}\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  searchQuery = event.target.elements['search-text'].value.trim();\n  \n  if (!searchQuery) return;\n\n  page = 1;\n  gallery.innerHTML = '';\n  toggleLoadMoreBtn(false);\n  removeEndMessage();\n  toggleLoader(true);\n\n  try {\n    const data = await getPictures(searchQuery, page);\n    totalHits = data.totalHits;\n    \n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n      toggleLoader(false);\n      return;\n    }\n\n    gallery.innerHTML = createMarkup(data.hits);\n    initializeLightbox();\n    toggleLoader(false);\n    \n    if (data.hits.length < 15 || page * 15 >= totalHits) {\n      toggleLoadMoreBtn(false);\n      if (page * 15 >= totalHits) showEndMessage();\n    } else {\n      toggleLoadMoreBtn(true);\n    }\n  } catch (error) {\n  iziToast.error({\n    title: 'Error',\n    message: 'Something went wrong. Please try again later.',\n    position: 'topRight',\n  });\n  toggleLoader(false);\n}\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  toggleLoader(true);\n  toggleLoadMoreBtn(false);\n\n  try {\n    const data = await getPictures(searchQuery, page);\n    gallery.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    lightbox.refresh();\n    toggleLoader(false);\n\n    const { height: cardHeight } = gallery\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (data.hits.length < 15 || page * 15 >= totalHits) {\n      toggleLoadMoreBtn(false);\n      showEndMessage();\n    } else {\n      toggleLoadMoreBtn(true);\n    }\n  } catch (error) {\n    console.error(error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    toggleLoader(false);\n  }\n}\n\nform.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\ntoggleLoadMoreBtn(false);"],"names":["API_KEY","BASE_URL","getPictures","query","page","axios","error","_b","_a","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","loadMoreBtn","searchQuery","totalHits","lightbox","initializeLightbox","SimpleLightbox","toggleLoader","show","toggleLoadMoreBtn","showEndMessage","iziToast","removeEndMessage","endMessage","handleSearch","event","data","handleLoadMore","cardHeight"],"mappings":"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"}