{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst API_KEY = '49342840-003e2c292237fbf09de0074d9';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPictures(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response?.data?.message || 'Failed to fetch images');\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\n\nexport const createMarkup = images => {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"title\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"title\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`\n    )\n    .join('');\n};\n\nexport function renderGallery(images, append = false) {\n  const markup = createMarkup(images);\n\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n    if (lightbox) lightbox.refresh();\n  } else {\n    gallery.innerHTML = markup;\n    if (lightbox) lightbox.destroy();\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    }); \n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n  if (lightbox) {\n    lightbox.destroy();\n    lightbox = null;\n  }\n}\n\n","import { getPictures } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more');\nconst container = document.querySelector('.container');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nfunction toggleLoadMoreBtn(show) {\n  loadMoreBtn.style.display = show ? 'block' : 'none';\n}\n\nfunction showEndMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'bottomCenter',\n    timeout: 5000,\n    close: true,\n    progressBar: true,\n  });\n}\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  searchQuery = event.target.elements['search-text'].value.trim();\n\n  if (!searchQuery) return;\n\n  page = 1;\n  clearGallery();\n  toggleLoadMoreBtn(false);\n  toggleLoader(true);\n\n  try {\n    const data = await getPictures(searchQuery, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n      toggleLoader(false);\n      return;\n    }\n\n    renderGallery(data.hits);\n    toggleLoader(false);\n\n    if (data.hits.length < 15 || page * 15 >= totalHits) {\n      toggleLoadMoreBtn(false);\n      if (page * 15 >= totalHits) showEndMessage();\n    } else {\n      toggleLoadMoreBtn(true);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    toggleLoader(false);\n  }\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  toggleLoader(true);\n  toggleLoadMoreBtn(false);\n\n  try {\n    const data = await getPictures(searchQuery, page);\n    renderGallery(data.hits, true);\n    toggleLoader(false);\n\n    const { height: cardHeight } = gallery.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (data.hits.length < 15 || page * 15 >= totalHits) {\n      toggleLoadMoreBtn(false);\n      showEndMessage();\n    } else {\n      toggleLoadMoreBtn(true);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    toggleLoader(false);\n  }\n}\n\nform.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\ntoggleLoadMoreBtn(false);"],"names":["API_KEY","BASE_URL","getPictures","query","page","axios","error","_b","_a","gallery","lightbox","createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","append","markup","SimpleLightbox","clearGallery","form","loader","loadMoreBtn","searchQuery","totalHits","toggleLoader","show","toggleLoadMoreBtn","showEndMessage","iziToast","handleSearch","event","data","handleLoadMore","cardHeight"],"mappings":"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"}